!function(n){var r={};function a(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,n){"use strict";n.r(e);jQuery(document).ready(function(a){var o,s,i,c=0,u=1,p=[],d=[],l=[],n=drgc_admin_params.ajax_url,r=drgc_admin_params.ajax_nonce,f=drgc_admin_params.drgc_ajx_instance_id,_=drgc_admin_params.site_id,b=drgc_admin_params.api_key,m=a("#dr-data-process-progressbar"),h=a(".wrapImportControls p"),g=a("#products-import-btn");function y(t,e,n){var r;o=t.entries_count,u=t.batch_size,c=t.index_start,a(".wrapImportControls").find("h4").remove(),m.show(),m.progressbar({max:o,value:0}),h.show(),g.hide(),r=o,a("#dr-data-process-total").text(r),x()}function x(){for(var t,e=0;e<u&&c<o;)p.push(c),c++,e++;p.length?(t={action:"drgc_ajx_action",step:"batchprocess",persist:s,nonce:r,instance_id:f,itemsBeingProcessed:p},a.ajax({dataType:"json",data:t,type:"post",url:n,context:this,nonce:r,success:j})):function(){m.hide(),a(".wrapImportControls").html("<h3><b>Cleaning up...</b></h3>");var t={action:"drgc_ajx_action",step:"end",persist:s,nonce:r,instance_id:f};a.ajax({dataType:"json",data:t,type:"post",url:n,context:this,success:v})}()}function j(t,e,n){var r;a.each(t.results,function(t,e){e.success?d.push(t):"failure"===e&&l.push(t),r=t}),function(t){i=i||a("#dr-data-process-counter");m.progressbar("option","value",t),i.text(t)}(c),p=[],s=t.results[r].persist,x()}function v(t,e,n){window.location.href=t.url}a("#products-import-btn").on("click",function(t){if(t.preventDefault(),!_||!b)return alert("Please provide siteID & apiKey!");g.attr("disabled","disabled"),a(".notice").is(":visible")&&a(".notice").hide(),a(".wrapImportControls").append("<h4> <b>Fetching products, locales and currencies...</b> </h4>");var e={action:"drgc_ajx_action",nonce:r,instance_id:f,step:"init"};a.ajax({dataType:"json",data:e,type:"post",url:n,context:this,nonce:r,success:y})})})}]);